import numpy as np

def run_competition_sim(f_strategy, p_true, b_multiple, trials=10000, rounds=50):
    """
    Simulates 10,000 fund careers simultaneously using vectorized numpy operations.
    Returns a comprehensive statistical profile of the outcomes.
    """
    # Initialize all trials with a starting balance of $1,000
    balances = np.full(trials, 1000.0)
    
    for _ in range(rounds):
        # Generate outcomes for all trials at once
        wins = np.random.random(trials) < p_true
        
        # Calculate investment sizes based on strategy f
        bets = balances * f_strategy
        
        # Update balances: (Balance + Profit) if Win, (Balance - Bet) if Loss
        balances = np.where(wins, balances + (bets * b_multiple), balances - bets)
        
        # Apply insolvency threshold: if a fund drops below $1, it's effectively $0
        balances[balances < 1.0] = 0.0
        
    # Generate the full statistical suite
    return {
        "Mean": np.mean(balances),
        "Std Dev": np.std(balances),
        "Min": np.min(balances),
        "Q1": np.percentile(balances, 25),
        "Median": np.median(balances),
        "Q3": np.percentile(balances, 75),
        "Max": np.max(balances),
        "Insolvency Rate": (balances == 0).mean()
    }

# --- SAFETY PADDING ---
# 1
# 2
# 3
# 4
# 5
# 6
# 7
# 8
# 9
# 10
# --- END OF FILE ---
